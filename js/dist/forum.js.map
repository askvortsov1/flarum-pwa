{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@askvortsov/flarum-pwa/./node_modules/idb/build/esm/index.js","webpack://@askvortsov/flarum-pwa/./node_modules/idb/build/esm/wrap-idb-value.js","webpack://@askvortsov/flarum-pwa/./src/forum/addPushNotifications.js","webpack://@askvortsov/flarum-pwa/./src/forum/addShareButtons.js","webpack://@askvortsov/flarum-pwa/./src/forum/index.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Button']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Link']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Page']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/extend']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/SessionDropdown']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/regenerator/index.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-pwa/webpack/runtime/define property getters","webpack://@askvortsov/flarum-pwa/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-pwa/webpack/runtime/make namespace object","webpack://@askvortsov/flarum-pwa/./forum.js"],"sourcesContent":["import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        const returnVal = await target[targetFuncName](...args);\n        if (isWrite)\n            await tx.done;\n        return returnVal;\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { extend } from 'flarum/common/extend';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport Link from 'flarum/common/components/Link';\nimport Page from 'flarum/common/components/Page';\nimport icon from 'flarum/common/helpers/icon';\n\nconst subscribeUser = (save) => {\n  return app.sw.pushManager\n    .subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: app.forum.attribute('vapidPublicKey'),\n    })\n    .then((subscription) => {\n      if (!save) return;\n\n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/pwa/push',\n        body: { subscription },\n      });\n    });\n};\n\nconst pushEnabled = () => {\n  if (!app.session.user) return false;\n\n  const obj = app.session.user.preferences();\n  let key;\n\n  for (key in obj) {\n    if ((typeof key === 'string' || key instanceof String) && key.startsWith('notify_') && key.endsWith('_push') && obj[key]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst usingAppleWebview = () => window.webkit && window.webkit.messageHandlers;\n\nconst supportsBrowserNotifications = () => 'Notification' in window;\n\nexport const refreshSubscription = async (sw) => {\n  if (!app.cache.pwaRefreshed && 'Notification' in window && window.Notification.permission === 'granted' && pushEnabled())\n    try {\n      await subscribeUser(true);\n    } catch (e) {\n      if (!sw.pushManager) {\n        return;\n      }\n      sw.pushManager.getSubscription().then((s) => s.unsubscribe().then(subscribeUser.bind(this, true)));\n    }\n  app.cache.pwaRefreshed = true;\n};\n\nconst pushConfigured = () => {\n  return app.forum.attribute('vapidPublicKey');\n};\n\n// notDetermined | denied | authorized | ephemeral | provisional | unknown\nlet firebasePushNotificationState = 'unknown';\n\nconst requestFirebasePushNotificationPermission = (event) => {\n  if (event.detail !== 'granted') {\n    return;\n  }\n\n  firebasePushNotificationState = 'granted';\n\n  window.webkit.messageHandlers['push-token'].postMessage('push-token');\n};\n\nconst saveFirebasePushToken = (event) => {\n  app.request({\n    method: 'POST',\n    url: app.forum.attribute('apiUrl') + '/pwa/firebase-push-subscriptions',\n    body: {\n      token: event.detail,\n    },\n  });\n};\n\nconst checkFirebasePushState = (event) => {\n  firebasePushNotificationState = event.detail;\n\n  m.redraw();\n};\n\nexport default () => {\n  extend(Page.prototype, 'oncreate', () => {\n    if (!pushConfigured()) return;\n\n    const dismissAlert = () => {\n      localStorage.setItem('askvortov-pwa.notif-alert.dismissed', JSON.stringify({ timestamp: new Date().getTime() }));\n    };\n\n    app.alerts.dismiss(app.cache.pwaNotifsAlert);\n\n    if (\n      !localStorage.getItem('askvortov-pwa.notif-alert.dismissed') &&\n      'Notification' in window &&\n      window.Notification.permission === 'default' &&\n      pushEnabled()\n    ) {\n      app.cache.pwaNotifsAlert = app.alerts.show(\n        {\n          controls: [\n            <Link class=\"Button Button--link\" href={app.route('settings')} onclick={() => dismissAlert()}>\n              {app.translator.trans('askvortsov-pwa.forum.alerts.optin_button')}\n            </Link>,\n          ],\n          ondismiss: dismissAlert,\n        },\n        app.translator.trans('askvortsov-pwa.forum.alerts.optin')\n      );\n    }\n  });\n\n  extend(NotificationGrid.prototype, 'notificationMethods', function (items) {\n    if (!pushConfigured()) return;\n\n    items.add('push', {\n      name: 'push',\n      icon: 'fas fa-mobile',\n      label: app.translator.trans('askvortsov-pwa.forum.settings.push_header'),\n    });\n  });\n\n  extend(SettingsPage.prototype, 'notificationsItems', function (items) {\n    if (usingAppleWebview()) return;\n\n    if (!pushConfigured()) return;\n\n    if (!supportsBrowserNotifications()) {\n      items.add(\n        'push-no-browser-support',\n        Alert.component(\n          {\n            dismissible: false,\n            controls: [\n              <a class=\"Button Button--link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Push_API\">\n                {app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.no_browser_support_button')}\n              </a>,\n            ],\n          },\n          [icon('fas fa-exclamation-triangle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.no_browser_support')]\n        ),\n        10\n      );\n      return;\n    }\n\n    if (window.Notification.permission === 'default') {\n      if (!pushConfigured()) return;\n\n      items.add(\n        'push-optin-default',\n        Alert.component(\n          {\n            itemClassName: 'pwa-setting-alert',\n            dismissible: false,\n            controls: [\n              Button.component(\n                {\n                  className: 'Button Button--link',\n                  onclick: () => {\n                    window.Notification.requestPermission((res) => {\n                      m.redraw();\n\n                      if (res === 'granted') {\n                        subscribeUser(true);\n                      }\n                    });\n                  },\n                },\n                app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default_button')\n              ),\n            ],\n          },\n          [icon('fas fa-exclamation-circle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default')]\n        ),\n        10\n      );\n    } else if (window.Notification.permission === 'denied') {\n      items.add(\n        'push-optin-denied',\n        Alert.component(\n          {\n            itemClassName: 'pwa-setting-alert',\n            dismissible: false,\n            type: 'error',\n            controls: [\n              <a\n                class=\"Button Button--link\"\n                href=\"https://support.humblebundle.com/hc/en-us/articles/360008513933-Enabling-and-Disabling-Browser-Notifications-in-Various-Browsers\"\n              >\n                {app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_denied_button')}\n              </a>,\n            ],\n          },\n          [icon('fas fa-exclamation-triangle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_denied')]\n        ),\n        10\n      );\n    }\n  });\n\n  extend(SettingsPage.prototype, 'notificationsItems', function (items) {\n    if (!usingAppleWebview()) return;\n\n    if (firebasePushNotificationState !== 'authorized') {\n      items.add(\n        'firebase-push-optin-default',\n        Alert.component(\n          {\n            itemClassName: 'pwa-setting-alert',\n            dismissible: false,\n            controls: [\n              Button.component(\n                {\n                  className: 'Button Button--link',\n                  onclick: () => {\n                    window.webkit.messageHandlers['push-permission-request'].postMessage('push-permission-request');\n                  },\n                },\n                app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default_button') + firebasePushNotificationState\n              ),\n            ],\n          },\n          [icon('fas fa-exclamation-circle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default')]\n        ),\n        10\n      );\n    }\n  });\n\n  extend(SettingsPage.prototype, 'oncreate', function () {\n    if (usingAppleWebview()) {\n      window.webkit.messageHandlers['push-permission-state'].postMessage('push-permission-state');\n\n      window.addEventListener('push-permission-request', requestFirebasePushNotificationPermission);\n      window.addEventListener('push-permission-state', checkFirebasePushState);\n      window.addEventListener('push-token', saveFirebasePushToken);\n    }\n  });\n\n  extend(SettingsPage.prototype, 'onremove', function () {\n    if (usingAppleWebview()) {\n      window.removeEventListener('push-permission-request', requestFirebasePushNotificationPermission);\n      window.removeEventListener('push-permission-state', checkFirebasePushState);\n      window.removeEventListener('push-token', saveFirebasePushToken);\n    }\n  });\n};\n","import { extend } from 'flarum/common/extend';\nimport extractText from 'flarum/common/utils/extractText';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\n\nasync function shareContent(data) {\n  try {\n    const title = extractText(data.title);\n    await navigator.share({ title, url: data.url });\n    resultPara.textContent = 'MDN shared successfully';\n  } catch (err) {\n    console.log('Error: ' + err);\n  }\n}\n\nexport default () => {\n  extend(DiscussionControls, 'userControls', function (items, discussion) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: discussion.title(),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.discussion(discussion),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.discussion_controls.share_button')\n      ),\n      -1\n    );\n  });\n\n  extend(PostControls, 'userControls', function (items, post) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: app.translator.trans('askvortsov-pwa.forum.post_controls.share_api.title', {\n                username: post.user().displayName(),\n                title: post.discussion().title(),\n              }),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.post(post),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.post_controls.share_button')\n      ),\n      100\n    );\n  });\n\n  extend(UserControls, 'userControls', function (items, user) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: user.displayName(),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.user(user),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.user_controls.share_button')\n      ),\n      100\n    );\n  });\n};\n","import { extend } from 'flarum/common/extend';\nimport { openDB } from 'idb';\n\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SessionDropdown from 'flarum/forum/components/SessionDropdown';\nimport addShareButtons from './addShareButtons';\nimport addPushNotifications, { refreshSubscription } from './addPushNotifications';\n\napp.initializers.add('askvortsov/flarum-pwa', () => {\n  const isInStandaloneMode = () =>\n    window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone || document.referrer.includes('android-app://');\n\n  extend(Page.prototype, 'oninit', () => {\n    const basePath = app.forum.attribute('basePath').trimRight('/');\n\n    const registerSW = async () => {\n      const dbPromise = openDB('keyval-store', 1, {\n        upgrade(db) {\n          db.createObjectStore('keyval');\n        },\n      });\n      (await dbPromise).put('keyval', app.forum.data.attributes, 'flarum.forumPayload');\n\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker\n          .register(basePath + '/sw', {\n            scope: basePath + '/',\n          })\n          .then((sw) => {\n            navigator.serviceWorker.ready.then(() => {\n              app.sw = sw;\n              refreshSubscription(sw);\n            });\n          });\n      }\n    };\n\n    registerSW();\n  });\n\n  extend(SessionDropdown.prototype, 'items', (items) => {\n    if (isInStandaloneMode() && items.has('administration')) {\n      items.replace(\n        'administration',\n        LinkButton.component(\n          {\n            icon: 'fas fa-wrench',\n            href: app.forum.attribute('adminUrl'),\n            target: '_self',\n            external: true,\n          },\n          app.translator.trans('core.forum.header.admin_button')\n        )\n      );\n    }\n  });\n\n  addShareButtons();\n  addPushNotifications();\n});\n","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['forum/components/NotificationGrid'];","module.exports = flarum.core.compat['forum/components/SessionDropdown'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['forum/utils/PostControls'];","module.exports = flarum.core.compat['forum/utils/UserControls'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["w","wrap","r","replaceTraps","u","unwrap","openDB","name","version","_temp","_ref","blocked","upgrade","blocking","terminated","request","indexedDB","open","openPromise","addEventListener","event","result","oldVersion","newVersion","transaction","then","db","deleteDB","_temp2","_ref2","deleteDatabase","undefined","readMethods","writeMethods","cachedMethods","Map","getMethod","target","prop","IDBDatabase","get","targetFuncName","replace","useIndex","isWrite","includes","IDBIndex","IDBObjectStore","prototype","method","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","storeName","_target","tx","_len","args","_key","returnVal","_args","arguments","_callee$","_context","prev","next","store","length","Array","index","shift","apply","sent","done","abrupt","stop","_x","set","oldTraps","_extends","receiver","has","instanceOfAny","object","constructors","some","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBCursor","IDBTransaction","getCursorAdvanceMethods","advance","continuePrimaryKey","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","promise","Promise","resolve","reject","unlisten","removeEventListener","success","error","value","cacheDonePromiseForTransaction","complete","DOMException","idbProxyTraps","objectStoreNames","objectStore","callback","wrapFunction","func","storeNames","call","concat","sort","_len2","_key2","_len3","_key3","transformCachableValue","Proxy","IDBRequest","newValue","a","i","extend","NotificationGrid","SettingsPage","Alert","Button","Link","Page","icon","subscribeUser","save","app","sw","pushManager","subscribe","userVisibleOnly","applicationServerKey","forum","attribute","subscription","url","body","pushEnabled","session","user","obj","preferences","key","String","startsWith","endsWith","usingAppleWebview","window","webkit","messageHandlers","supportsBrowserNotifications","refreshSubscription","cache","pwaRefreshed","Notification","permission","t0","getSubscription","s","unsubscribe","bind","_this","pushConfigured","firebasePushNotificationState","requestFirebasePushNotificationPermission","detail","postMessage","saveFirebasePushToken","token","checkFirebasePushState","m","redraw","dismissAlert","localStorage","setItem","JSON","stringify","timestamp","Date","getTime","alerts","dismiss","pwaNotifsAlert","getItem","show","controls","href","route","onclick","translator","trans","ondismiss","items","add","label","component","dismissible","itemClassName","className","requestPermission","res","type","extractText","DiscussionControls","PostControls","UserControls","shareContent","_shareContent","data","title","navigator","share","resultPara","textContent","console","log","discussion","location","protocol","hostname","post","username","displayName","LinkButton","SessionDropdown","addShareButtons","addPushNotifications","initializers","isInStandaloneMode","matchMedia","matches","standalone","document","referrer","basePath","trimRight","registerSW","dbPromise","createObjectStore","put","attributes","serviceWorker","register","scope","ready","external","_typeof","require","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","defineProperty","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","methodName","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","isGeneratorFunction","genFun","ctor","constructor","setPrototypeOf","__proto__","awrap","async","iter","keys","val","reverse","pop","skipTempReset","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","_next","_throw","assign","source"],"sourceRoot":""}