{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-pwa/webpack/runtime/define property getters","webpack://@askvortsov/flarum-pwa/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-pwa/webpack/runtime/make namespace object","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Button']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWALogoUploadButton.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWAPage.js","webpack://@askvortsov/flarum-pwa/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UploadImageButton'];","import Button from 'flarum/common/components/Button';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\n\nexport default class PWALogoUploadButton extends UploadImageButton {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    attrs.name = `pwa-icon-${attrs.size}x${attrs.size}`;\n  }\n\n  view(vnode) {\n    this.attrs.loading = this.loading;\n    this.attrs.className = (this.attrs.className || '') + ' Button';\n\n    if (app.data.settings['askvortsov-pwa.icon_' + this.attrs.size + '_path']) {\n      this.attrs.onclick = this.remove.bind(this);\n\n      return (\n        <div>\n          <p>\n            <img src={app.forum.attribute(this.attrs.name + 'Url')} alt=\"\" />\n          </p>\n          <p>{super.view({ ...vnode, children: app.translator.trans('core.admin.upload_image.remove_button') })}</p>\n        </div>\n      );\n    } else {\n      this.attrs.onclick = this.upload.bind(this);\n    }\n\n    return super.view({ ...vnode, children: app.translator.trans('core.admin.upload_image.upload_button') });\n  }\n\n  resourceUrl() {\n    return app.forum.attribute('apiUrl') + '/pwa/logo/' + this.attrs.size;\n  }\n}\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nimport PWALogoUploadButton from './PWALogoUploadButton';\n\nexport default class PWAPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.saving = false;\n    this.refresh();\n  }\n\n  refresh() {\n    this.loading = true;\n\n    this.status_messages = [];\n    this.manifest = {};\n    this.sizes = [];\n\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/pwa/settings',\n      })\n      .then((response) => {\n        this.manifest = response['data']['attributes']['manifest'];\n        this.sizes = response['data']['attributes']['sizes'];\n        this.status_messages = response['data']['attributes']['status_messages'];\n\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  checkExistence(url) {\n    let http = new XMLHttpRequest();\n\n    http.open('HEAD', url, false);\n    http.send();\n\n    return http.status != 404;\n  }\n\n  content() {\n    if (this.loading || this.saving) {\n      return (\n        <div className=\"PWAPage\">\n          <div className=\"container\">\n            <LoadingIndicator />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PWAPage\">\n        <div className=\"container\">\n          <form>\n            <h2>{app.translator.trans('askvortsov-pwa.admin.pwa.heading')}</h2>\n            <div className=\"helpText\">{app.translator.trans('askvortsov-pwa.admin.pwa.text')}</div>\n\n            <div class=\"statusCheck\">\n              <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.status_check_heading')}</legend>\n              {this.status_messages.map((message) => (\n                <Alert type={message.type} dismissible={false}>\n                  {[message.message]}\n                </Alert>\n              ))}\n            </div>\n\n            <fieldset class=\"parent\">\n              <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.heading')}</legend>\n              {this.buildSettingComponent({\n                setting: 'askvortsov-pwa.debug',\n                label: app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.debug_label'),\n                help: app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.debug_text'),\n                type: 'boolean',\n              })}\n              {this.buildSettingComponent(() => {\n                return (\n                  <div>\n                    <Button className=\"Button\" onclick={this.resetVapid.bind(this)}>\n                      Reset VAPID keys\n                    </Button>\n                    <div className=\"helpText\">{app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_text')}</div>\n                  </div>\n                );\n              })}\n            </fieldset>\n\n            <fieldset class=\"parent\">\n              <fieldset>\n                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.about.heading')}</legend>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.shortName',\n                  placeholder: this.setting('forum_title')(),\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_text'),\n                  type: 'text',\n                })}\n              </fieldset>\n              <fieldset>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.longName',\n                  placeholder: this.setting('forum_title')(),\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.about.long_name_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.about.long_name_text'),\n                  type: 'text',\n                })}\n              </fieldset>\n              <fieldset>\n                <div className=\"helpText\">{app.translator.trans('askvortsov-pwa.admin.pwa.about.description_text')}</div>\n                <textarea className=\"FormControl\" value={this.manifest.description} disabled={true}>\n                  {this.manifest.description}\n                </textarea>\n              </fieldset>\n            </fieldset>\n\n            <fieldset class=\"parent\">\n              <fieldset>\n                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.colors.heading')}</legend>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.themeColor',\n                  placeholder: this.setting('theme_primary_color')(),\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_text'),\n                  type: 'color-preview',\n                })}\n              </fieldset>\n              <fieldset>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.backgroundColor',\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_text'),\n                  type: 'color-preview',\n                })}\n              </fieldset>\n            </fieldset>\n\n            <fieldset class=\"parent\">\n              <fieldset>\n                <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.other.heading')}</legend>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.forcePortrait',\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.other.force_portrait_text'),\n                  type: 'boolean',\n                })}\n              </fieldset>\n              <fieldset>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.userMaxSubscriptions',\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.other.user_max_subscriptions_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.other.user_max_subscriptions_text'),\n                  type: 'number',\n                  placeholder: 20,\n                })}\n              </fieldset>\n              <fieldset>\n                {this.buildSettingComponent({\n                  setting: 'askvortsov-pwa.pushNotifPreferenceDefaultToEmail',\n                  label: app.translator.trans('askvortsov-pwa.admin.pwa.other.push_notif_preference_default_to_email_label'),\n                  help: app.translator.trans('askvortsov-pwa.admin.pwa.other.push_notif_preference_default_to_email_text'),\n                  type: 'bool',\n                })}\n              </fieldset>\n            </fieldset>\n\n            {this.submitButton()}\n\n            <fieldset>\n              <legend>{app.translator.trans('askvortsov-pwa.admin.pwa.logo_heading')}</legend>\n              <div className=\"helpText\">{app.translator.trans('askvortsov-pwa.admin.pwa.logo_text')}</div>\n              {this.sizes.map((size) => {\n                return (\n                  <fieldset class=\"logoFieldset\">\n                    <PWALogoUploadButton size={size} />\n                    <div className=\"helpText\">{app.translator.trans('askvortsov-pwa.admin.pwa.logo_size_text', { size })}</div>\n                  </fieldset>\n                );\n              })}\n            </fieldset>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  resetVapid() {\n    if (confirm(app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_confirm'))) {\n      app\n        .request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/reset_vapid',\n        })\n        .then((response) => {\n          app.alerts.show(\n            {\n              type: 'success',\n            },\n            app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_success', { count: response.deleted })\n          );\n        });\n    }\n  }\n\n  saveSettings(e) {\n    const hex = /^(#[0-9a-f]{3}([0-9a-f]{3})?)?$/i;\n\n    if (!hex.test(this.setting('askvortsov-pwa.backgroundColor')())) {\n      alert(app.translator.trans('core.admin.appearance.enter_hex_message'));\n      return;\n    }\n\n    return super.saveSettings(e);\n  }\n}\n","import PWAPage from './components/PWAPage';\n\napp.initializers.add('askvortsov/flarum-pwa', () => {\n  app.extensionData.for('askvortsov-pwa').registerPage(PWAPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","flarum","core","compat","_extends","assign","target","i","arguments","length","source","apply","this","PWALogoUploadButton","_UploadImageButton","initAttrs","attrs","name","size","_proto","view","vnode","loading","className","app","data","settings","onclick","remove","m","src","forum","attribute","alt","children","translator","trans","upload","resourceUrl","UploadImageButton","PWAPage","_ExtensionPage","oninit","saving","refresh","_this","status_messages","manifest","sizes","request","method","url","then","response","redraw","checkExistence","http","XMLHttpRequest","open","send","status","content","_this2","LoadingIndicator","class","map","message","Alert","type","dismissible","buildSettingComponent","setting","label","help","Button","resetVapid","placeholder","description","disabled","submitButton","confirm","alerts","show","count","deleted","saveSettings","e","test","alert","ExtensionPage","initializers","add","extensionData","registerPage"],"sourceRoot":""}